!function(t,e){"object"==typeof exports&&"undefined"!=typeof module?module.exports=e():"function"==typeof define&&define.amd?define(e):(t="undefined"!=typeof globalThis?globalThis:t||self).Stepper=e()}(this,(function(){"use strict";var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(e,n)};var e,n=function(){return(n=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++)for(var s in e=arguments[n])Object.prototype.hasOwnProperty.call(e,s)&&(t[s]=e[s]);return t}).apply(this,arguments)},r={window:"undefined"!=typeof window?window:null,startStep:0};!function(t){t.container="stepper",t.inner="stepper-inner",t.item="stepper-item",t.itemActive="is-active",t.progress="stepper-progress",t.progressItem="stepper-progress-item"}(e||(e={}));var s=e;function i(t,e){void 0===e&&(e={});var n=t instanceof Element;if(!n&&"string"!=typeof t)throw new Error(t+" is invalid value of tag");var r=n?t:document.createElement(t);if(e.children&&Array.isArray(e.children))for(var s=e.children.reverse();s.length;){var i=s.pop();i instanceof Element&&r.appendChild(i)}if(e.attr&&"object"==typeof e.attr)for(var o in e.attr)r.setAttribute(o,e.attr[o]);return r}var o=function(){function t(t,e){this.opts="object"==typeof e?e:{},this.container=this.setupContainer(this.opts.container),this.progressItems=this.setupItems(t,this.container)}return t.prototype.getHTML=function(){return this.container},t.prototype.setActive=function(t){if(this.progressItems[t]){for(var e=this.currentIndex-1===t||this.currentIndex+1===t,n=t<=0||!e&&!this.isPrevItemActive(t)?0:t;n<=this.progressItems.length-1;){var r=this.progressItems[n];if(n<=t&&r.classList.add("is-active"),n>t&&r.classList.remove("is-active"),e&&!this.isNextItemActive(n))break;n++}this.currentIndex=t}},t.prototype.getOpts=function(){return this.opts},t.prototype.isPrevItemActive=function(t){var e=t-1;return e>=0&&this.progressItems[e].classList.contains("is-active")},t.prototype.isNextItemActive=function(t){var e=t+1;return e<=this.progressItems.length-1&&this.progressItems[e].classList.contains("is-active")},t.prototype.setupContainer=function(t){return t?(t.classList.add(s.progress),t):i("div",{attr:{class:s.progress}})},t.prototype.setupItems=function(t,e){for(var n=this,r=[],o=function(){var t=i("div",{attr:{class:s.progressItem}}),o=r.length+1;t.textContent=o.toString(),p.opts.navEnabled&&t.addEventListener("click",(function(t){n.onClick&&n.onClick(o-1)})),r.push(t),e.appendChild(t)},p=this;r.length!==t;)o();return r},t}(),p=function(e){function n(t,n){var r=e.call(this,t.children)||this;return r.container=t,r.opts=n,r.setup(r.getStepsHtml()),n.progress&&r.setupProgress(n.progress),r.setStepActive(n.index),r}return function(e,n){function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}(n,e),n.prototype.setStepActive=function(t){if(Number.isFinite(t)){var e=this.setStep(t),n=e[0],r=e[1];n&&n.elem.classList.remove(s.itemActive),r&&r.elem.classList.add(s.itemActive),this.progress&&r&&this.progress.setActive(r.index)}},n.prototype.setupProgress=function(t){var e=this,n=new o(this.getStepsCount(),t);"object"==typeof(t=n.getOpts())&&(t.container||this.container.insertAdjacentElement("beforebegin",n.getHTML())),t.navEnabled&&"function"==typeof this.opts.progressClickHandler&&(n.onClick=function(t){return e.opts.progressClickHandler(t)}),this.progress=n},n.prototype.setup=function(t){Array.prototype.forEach.call(t,(function(t){t.classList.add(s.item)}))},n}(function(){function t(t){this.steps=t}return t.prototype.getStepsCount=function(){return this.steps.length},t.prototype.getStepsHtml=function(){return this.steps},t.prototype.getCurrentStep=function(){return this.currentStep},t.prototype.getStep=function(t){return this.isStepIndexValid(t)?{index:t,elem:this.steps[t]}:null},t.prototype.setStep=function(t){return this.isStepIndexValid(t)&&this.isStepInRange(t)?(this.prevStep=this.currentStep,this.currentStep={index:t,elem:this.steps[t]},[this.prevStep,this.currentStep]):[]},t.prototype.isStepIndexValid=function(t){var e="number"==typeof t&&Number.isFinite(t);return e||console.warn("[Stepper.js] supplied step value is not a number"),e},t.prototype.isStepInRange=function(t){var e=t>=0&&t<=this.getStepsCount()-1;return e||console.warn("[Stepper.js] cannot perform step change to index: "+t),e},t}());return function(){function t(t,e){this.eventListenters={change:[]},this.options=n(n({},r),e),this.state=this.getInitialState(),this.stepperView=new p(t,this.composeStepperViewOpts(this.options)),this.onStateChange(this.handleStateChange.bind(this))}return t.prototype.destroy=function(){for(var t in this)delete this[t];for(var e=Object.getPrototypeOf(this);e;){for(var t in e)delete e[t];e=Object.getPrototypeOf(e)}},t.prototype.reset=function(){var t=this.stepperView.getStep(0);this.setState(n(n({},this.state),{isFrozen:!1,step:t}))},t.prototype.isFrozen=function(){return this.state.isFrozen},t.prototype.freeze=function(t){this.setState(n(n({},this.state),{isFrozen:t}))},t.prototype.getCurrentStep=function(){return this.state.step},t.prototype.prev=function(){this.performStepChange(this.stepperView.getCurrentStep().index-1)},t.prototype.next=function(){this.performStepChange(this.stepperView.getCurrentStep().index+1)},t.prototype.stepTo=function(t){this.performStepChange(t)},t.prototype.composeStepperViewOpts=function(t){var e=this;return{index:t.startStep,progress:t.progress,progressClickHandler:function(t){e.performStepChange(t)}}},t.prototype.handleStateChange=function(t,e){this.stepperView.setStepActive(e.step.index)},t.prototype.onStateChange=function(t){this.eventListenters.change.push(t)},t.prototype.performStepChange=function(t){t=Number.parseInt(t);var e=this.stepperView.getCurrentStep(),r=this.stepperView.getStep(t);if(r){var s=this.canPerformStepChange(e,r);if(s)return this.setState(n(n({},this.state),{step:r})),s}},t.prototype.canPerformStepChange=function(t,e){if(!this.state.isFrozen){if(!this.options.validateStepChange||"function"!=typeof this.options.validateStepChange)return!0;var n=this.options.validateStepChange(t,e);return n||console.warn("[Stepper.js]: step change did not pass validation. Check your validateStepChange()"),n}console.warn("[Stepper.js] is frozen")},t.prototype.getInitialState=function(){return{isFrozen:!1,step:null}},t.prototype.setState=function(t){var e=this.state;this.eventListenters.change.forEach((function(n){return setTimeout((function(){return n(e,t)}),0)})),this.state=t},t.prototype.validateArgs=function(){},t.prototype.isOptsValid=function(){},t.prototype.isContainerValid=function(){},t.prototype.logError=function(){},t}()}));
